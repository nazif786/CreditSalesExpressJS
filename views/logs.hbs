<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->

  <title>Mobile Credit Sales Mgt System</title>
  <link rel="stylesheet" href="static/css/style.css">
  <link rel="stylesheet" href="static/css/bootstrap.min.css">
  <link rel="stylesheet" href="../static/css/bootstrap.min.css">
  <link rel="stylesheet" href="../static/css/sidebar.css">
  <link rel="stylesheet" href="../static/css/style.css">
  <link rel="stylesheet" href="../static/css/style.css">

  {{!--
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/js/all.min.js"></script> --}}
  {{!--
  <link rel="stylesheet" href="../static/js/fontawesome.js"> --}}
  <script src="../static/js/solic.js"></script>


</head>

<body>
  {{!-- {{>navbar}} --}}
  {{!-- {{>sidebar}} --}}
  <div class="contain">
    <div class="container-fluid">
      {{>banner}}
    </div>
    <div class="main">
      <div class="leftybar">
        {{>sidebar}}
      </div>
      <div class="righty">
        <div class="maintop">
          {{>maintop}}
        </div>
        {{!-- Contenst Start --}}

        <div class="contents">
          <div class="formtitle">
            <h2> Logs Reports </h2>
          </div>

          <div class="mainform">
            <div class="">
              {{#if msg}}
              <div class="alert alert-warning alert-dismissible fade show" role="alert">
                {{msg}}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
              {{/if}}

              <div class="log">

                <nav id="van">
                  <ul>
                    <li><a href="#">Sales Logs</a>
                      <ul>
                        <li>{{!-- <a href="#">Sals Update Logs</a> --}}
                          <form action="/salesUpdateLogs" method="post" class="logform">
                            <input type="submit" value="Sales Update Logs" id="inp">
                          </form>
                        </li>
                        <li>
                          <form action="/salesDeleteLogs" method="post" class="logform">
                            <input type="submit" value="Sales Delete Logs." id="inp2">
                          </form>
                        </li>
                      </ul>
                    </li>
                    <li><a href="#">Purchase Logs</a>
                      <ul>
                        <li>
                          <form action="/purchaseUpdateLogs" method="post" class="logform">
                            <input type="submit" value="Purchase Update Logs" id="inp3">
                          </form>
                        </li>
                        <li>
                          <form action="purchaseDeleteLogs" method="post" class="logform">
                            <input type="submit" value="Purchase Delete Logs." id="inp4">
                          </form>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </nav>


              </div>
            </div>

            {{#if salesDatamsg}}
            <div class="viewcontents">
              <form action="#" class="">
                <h2>Sales Data Update Logs</h2>
                {{!-- <input type="submit" class="btn btn-secondary btn-show" value="Show All Records">--}}
                <div style="text-align:right ;">
                  <input type="button" onclick="export_data()" value="Export xlsx">
                </div>
                <table class="table table-striped table-hover" id="expData">
                  <thead>
                    <tr>
                      <th scope="col">id</th>
                      <th scope="col">Sale id</th>
                      <th scope="col">User id</th>
                      <th scope="col">Original Amount</th>
                      <th scope="col">changed Amount</th>
                      <th scope="col">Original Payment</th>
                      <th scope="col">Changed Payment</th>
                      <th scope="col">Changed On</th>
                    </tr>
                  </thead>
                  <tbody>
                    {{#saleChangeData}}
                    <tr>

                      <td>{{change_id}}</td>
                      <td>{{sale_id}}</td>
                      <td>{{user_id}}</td>
                      <td>{{before_amount}}</td>
                      <td>{{after_amount}}</td>
                      <td>{{before_payment}}</td>
                      <td>{{after_payment}}</td>
                      <td>{{changedAt}}</td>
                    </tr>
                    {{/saleChangeData}}
                  </tbody>
                  <caption>sales data update logs table </caption>
                </table>
              </form>
            </div> {{!-- End of viewcontents --}}
            {{/if}}

            {{#if salesDeletemsg}}
            <div class="viewcontents">
              <form action="#" class="">
                <h2>Sales Data Delete Logs </h2>
                {{!-- <input type="submit" class="btn btn-secondary btn-show" value="Show All Records">--}}
                <div style="text-align:right ;">
                  <input type="button" onclick="export_data2()" value="Export xlsx">
                </div>
                <table class="table table-bordered table-striped table-hover" id="expData2" style="text-align: center; vertical-align: middle;">
                  <thead>
                    <tr>
                      <th scope="col">id</th>
                      <th scope="col">Sale id</th>
                      <th scope="col">Customer id</th>
                      <th scope="col">Company id</th>
                      <th scope="col">User id</th>
                      <th scope="col">Transaction type id</th>
                      <th scope="col"> Amount</th>
                      <th scope="col"> Payment</th>
                      <th scope="col"> Receipt No</th>
                      <th scope="col"> Sale Date</th>
                      <th scope="col">Deleted On</th>
                    </tr>
                  </thead>
                  <tbody>
                    {{#saleDeleteData}}
                    <tr>

                      <td>{{sale_delete_id}}</td>
                      <td>{{sale_id}}</td>
                      <td>{{cust_id}}</td>
                      <td>{{comp_id}}</td>
                      <td>{{user_id}}</td>
                      <td>{{trans_type_id}}</td>
                      <td>{{amount}}</td>
                      <td>{{payment}}</td>
                      <td>{{reciept_no}}</td>
                      <td>{{sale_date}}</td>
                      <td>{{deletedAt}}</td>
                    </tr>
                    {{/saleDeleteData}}
                  </tbody>
                  <caption>sales data delete logs table</caption>
                </table>
              </form>
            </div> {{!-- End of viewcontents --}}
            {{/if}}

            {{#if purchaseDatamsg}}
            <div class="viewcontents">
              <form action="#" class="">
                <h2> Purchase Data Update Logs </h2>
                {{!-- <input type="submit" class="btn btn-secondary btn-show" value="Show All Records">--}}
                <div style="text-align:right ;">
                  <input type="button" onclick="export_data3()" value="Export xlsx">
                </div>
                <table class="table table-bordered table-striped table-hover" id="expData3" style="text-align: center; vertical-align: middle;">
                  <thead>
                    <tr>
                      <th scope="col">id</th>
                      <th scope="col">Purchase id</th>
                      <th scope="col">user id</th>
                      <th scope="col"> Original Amount</th>
                      <th scope="col"> New Amount</th>
                      <th scope="col"> Original Payment</th>
                      <th scope="col"> New Payment</th>
                      <th scope="col"> Receipt No</th>
                      <th scope="col"> Changed On</th>
                    </tr>
                  </thead>
                  <tbody>
                    {{#purchaseChangeData}}
                    <tr>

                      <td>{{p_change_id}}</td>
                      <td>{{p_id}}</td>
                      <td>{{user_id}}</td>
                      <td>{{before_p_amount}}</td>
                      <td>{{after_P_amount}}</td>
                      <td>{{before_p_payment}}</td>
                      <td>{{after_p_payment}}</td>
                      <td>{{p_reciept_no}}</td>
                      <td>{{changedAt}}</td>
                      
                    </tr>
                    {{/purchaseChangeData}}
                  </tbody>
                  <caption>purchase data update logs table</caption>
                </table>
              </form>
            </div> {{!-- End of viewcontents --}}
            {{/if}}

            {{#if purchaseDeletemsg}}
            <div class="viewcontents">
              <form action="#" class="">
                <h2>Purchase Data Delete Logs </h2>
                {{!-- <input type="submit" class="btn btn-secondary btn-show" value="Show All Records">--}}
                <div style="text-align:right ;">
                  <input type="button" onclick="export_data4()" value="Export xlsx">
                </div>
                <table class="table table-bordered table-striped table-hover" id="expData4" style="text-align: center; vertical-align: middle;">
                  <thead>
                    <tr>
                      <th scope="col">id</th>
                      <th scope="col">purchase id</th>
                      <th scope="col">company id</th>
                      <th scope="col">trnsaction type id</th>
                      <th scope="col">user id</th>
                      <th scope="col"> amount</th>
                      <th scope="col"> payment</th>
                      <th scope="col"> receipt No</th>
                      <th scope="col"> commission Amount</th>
                      <th scope="col"> purchase Date</th>
                      <th scope="col"> deleted On</th>
                    </tr>
                  </thead>
                  <tbody>
                    {{#purchaseDeleteData}}
                    <tr>

                      <td>{{delete_id}}</td>
                      <td>{{p_id}}</td>
                      <td>{{comp_id}}</td>
                      <td>{{trans_type_id}}</td>
                      <td>{{user_id}}</td>
                      <td>{{p_amount}}</td>
                      <td>{{p_payment}}</td>
                      <td>{{p_reciept_no}}</td>
                      <td>{{p_com}}</td>
                      <td>{{p_date}}</td>
                      <td>{{deletedAt}}</td>
                      
                    </tr>
                    {{/purchaseDeleteData}}
                    <caption> Purchaes Delete Logs Table </caption>
                  </tbody>
                </table>
              </form>
            </div> {{!-- End of viewcontents --}}
            {{/if}}
          </div>
          {{!-- Contents End --}}
        </div>
      </div>

    </div>
    {{>footer}}

    <script src="../static/js/bootstrap.bundle.min.js"></script>
    <!-- Optional JavaScript; choose one of the two! -->
    <script src="jquery-3.3.1.slim.min.js"></script>
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="./api/jquery-3.3.1.slim.min.js"></script>
    <script src="../static/js/bootstrap.min.js"></script>
    <script src="../static/js/popper.min.js"></script>
    <script src="../static/js/solic.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script>
  function export_data() {
      //alert("Welcome to the javaTpoint.com");
      let data = document.getElementById('expData');
      var fp = XLSX.utils.table_to_book(data, ['MySheets']);
      XLSX.write(fp, {
        bookType: 'xlsx',
        type: 'base64'
      });
      let d = new Date(Date.now())
      let D = 'sale_update_logs' + d.getFullYear() + '_' + d.getMonth() + '_' + d.getDate()
      XLSX.writeFile(fp, D + '.xlsx')
    }
    function export_data2() {
      //alert("Welcome to the javaTpoint.com");
      let data = document.getElementById('expData2');
      var fp = XLSX.utils.table_to_book(data, ['MySheets']);
      XLSX.write(fp, {
        bookType: 'xlsx',
        type: 'base64'
      });
      let d = new Date(Date.now())
      let D = 'sale_delete_logs_' + d.getFullYear() + '_' + d.getMonth() + '_' + d.getDate()
      XLSX.writeFile(fp, D + '.xlsx')
    }

    function export_data3() {
      //alert("Welcome to the javaTpoint.com");
      let data = document.getElementById('expData3');
      var fp = XLSX.utils.table_to_book(data, ['MySheets']);
      XLSX.write(fp, {
        bookType: 'xlsx',
        type: 'base64'
      });
      let d = new Date(Date.now())
      let D = 'purchase_update_logs' + d.getFullYear() + '_' + d.getMonth() + '_' + d.getDate()
      XLSX.writeFile(fp, D + '.xlsx')
    }


    function export_data4() {
      //alert("Welcome to the javaTpoint.com");
      let data = document.getElementById('expData4');
      var fp = XLSX.utils.table_to_book(data, ['MySheets']);
      XLSX.write(fp, {
        bookType: 'xlsx',
        type: 'base64'
      });
      let d = new Date(Date.now())
      let D = 'purchase_delete_logs' + d.getFullYear() + '_' + d.getMonth() + '_' + d.getDate()
      XLSX.writeFile(fp, D + '.xlsx')
    }

</script>
</body>

</html>